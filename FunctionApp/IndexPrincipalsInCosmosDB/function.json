{
  "bindings": [
    {
      "name": "ActivityInput",
      "type": "activityTrigger",
      "direction": "in"
    },
    {
      "name": "principalsRawOut",
      "type": "cosmosDB",
      "direction": "out",
      "databaseName": "EntraData",
      "containerName": "principals",
      "connection": "CosmosDbConnectionString",
      "createIfNotExists": false,
      "partitionKey": "/objectId"
    },
    {
      "name": "principalChangesOut",
      "type": "cosmosDB",
      "direction": "out",
      "databaseName": "EntraData",
      "containerName": "changes",
      "connection": "CosmosDbConnectionString",
      "createIfNotExists": false,
      "partitionKey": "/changeDate"
    },
    {
      "name": "snapshotsOut",
      "type": "cosmosDB",
      "direction": "out",
      "databaseName": "EntraData",
      "containerName": "snapshots",
      "connection": "CosmosDbConnectionString",
      "createIfNotExists": false,
      "partitionKey": "/id"
    },
    {
      "name": "principalsRawIn",
      "type": "cosmosDB",
      "direction": "in",
      "databaseName": "EntraData",
      "containerName": "principals",
      "connection": "CosmosDbConnectionString",
      "sqlQuery": "SELECT c.objectId, c.principalType, c.displayName, c.accountEnabled, c.deleted, c.createdDateTime, c.userPrincipalName, c.userType, c.lastSignInDateTime, c.passwordPolicies, c.usageLocation, c.externalUserState, c.externalUserStateChangeDateTime, c.onPremisesSyncEnabled, c.onPremisesSamAccountName, c.onPremisesUserPrincipalName, c.onPremisesSecurityIdentifier, c.securityEnabled, c.mailEnabled, c.mail, c.groupTypes, c.membershipRule, c.isAssignableToRole, c.visibility, c.classification, c.description, c.deletedDateTime, c.memberCountDirect, c.userMemberCount, c.groupMemberCount, c.servicePrincipalMemberCount, c.deviceMemberCount, c.appId, c.appDisplayName, c.servicePrincipalType, c.appRoleAssignmentRequired, c.servicePrincipalNames, c.tags, c.notes, c.signInAudience, c.publisherDomain, c.keyCredentials, c.passwordCredentials, c.secretCount, c.certificateCount, c.deviceId, c.operatingSystem, c.operatingSystemVersion, c.isCompliant, c.isManaged, c.trustType, c.profileType, c.manufacturer, c.model, c.deviceVersion, c.approximateLastSignInDateTime, c.registrationDateTime FROM c"
    }
  ]
}
