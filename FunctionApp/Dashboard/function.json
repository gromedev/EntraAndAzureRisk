{
  "bindings": [
    {
      "authLevel": "function",
      "type": "httpTrigger",
      "direction": "in",
      "name": "Request",
      "methods": [ "get" ],
      "route": "dashboard"
    },
    {
      "type": "http",
      "direction": "out",
      "name": "Response"
    },
    {
      "name": "principalsIn",
      "type": "cosmosDB",
      "direction": "in",
      "databaseName": "EntraData",
      "containerName": "principals",
      "connection": "CosmosDbConnectionString",
      "sqlQuery": "SELECT TOP 1000 * FROM c WHERE (NOT IS_DEFINED(c.deleted) OR c.deleted = false)"
    },
    {
      "name": "resourcesIn",
      "type": "cosmosDB",
      "direction": "in",
      "databaseName": "EntraData",
      "containerName": "resources",
      "connection": "CosmosDbConnectionString",
      "sqlQuery": "SELECT TOP 500 * FROM c WHERE (NOT IS_DEFINED(c.deleted) OR c.deleted = false) AND c.resourceType NOT IN ('directoryRoleDefinition', 'azureRoleDefinition')"
    },
    {
      "name": "edgesIn",
      "type": "cosmosDB",
      "direction": "in",
      "databaseName": "EntraData",
      "containerName": "edges",
      "connection": "CosmosDbConnectionString",
      "sqlQuery": "SELECT TOP 2000 * FROM c WHERE (NOT IS_DEFINED(c.deleted) OR c.deleted = false)"
    },
    {
      "name": "policiesIn",
      "type": "cosmosDB",
      "direction": "in",
      "databaseName": "EntraData",
      "containerName": "policies",
      "connection": "CosmosDbConnectionString",
      "sqlQuery": "SELECT TOP 500 * FROM c WHERE (NOT IS_DEFINED(c.deleted) OR c.deleted = false)"
    },
    {
      "name": "eventsIn",
      "type": "cosmosDB",
      "direction": "in",
      "databaseName": "EntraData",
      "containerName": "events",
      "connection": "CosmosDbConnectionString",
      "sqlQuery": "SELECT TOP 500 * FROM c"
    },
    {
      "name": "auditIn",
      "type": "cosmosDB",
      "direction": "in",
      "databaseName": "EntraData",
      "containerName": "audit",
      "connection": "CosmosDbConnectionString",
      "sqlQuery": "SELECT TOP 500 * FROM c ORDER BY c.auditDate DESC"
    }
  ]
}
